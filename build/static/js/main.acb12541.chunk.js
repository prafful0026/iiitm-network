(this["webpackJsonpiiitm-network"]=this["webpackJsonpiiitm-network"]||[]).push([[0],{159:function(e,t,n){},183:function(e,t,n){},191:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),s=n.n(c),i=(n(159),n(14)),o=n(12),l=n(10),u=n.n(l),j=n(19),d=n(28),p=n.n(d),b="USER_LOGIN_REQUEST",O="USER_LOGIN_SUCCESS",x="USER_LOGIN_FAIL",h="USER_LOGOUT",m="",f=(n(183),n(13)),g=n(290),v=n(293),y=n(1),I=function(e){var t=e.error,n=Object(a.useState)(!0),r=Object(i.a)(n,2),c=r[0],s=r[1],o=function(e,t){"clickaway"!==t&&s(!1)};return Object(y.jsx)("div",{children:Object(y.jsx)(v.a,{anchorOrigin:{vertical:"top",horizontal:"middle"},open:c,autoHideDuration:3e3,onClose:o,children:Object(y.jsx)(g.a,{onClose:o,severity:"error",children:t})})})},S=function(){var e=Object(o.b)(),t=Object(a.useState)(""),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),l=Object(i.a)(s,2),d=l[0],h=l[1],g=Object(f.g)(),v=Object(o.c)((function(e){return e.userLogin})),S=(v.loading,v.error),w=v.userInfo;Object(a.useEffect)((function(){w&&g.push("/")}),[g,w]);return Object(y.jsxs)(a.Fragment,{children:[S&&Object(y.jsx)(I,{error:S}),Object(y.jsx)("div",{className:"loginPage",children:Object(y.jsxs)("div",{className:"formContainer",children:[Object(y.jsx)("h2",{children:"Login to IIITM Network"}),Object(y.jsx)("form",{onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(){var n=Object(j.a)(u.a.mark((function n(a){var r,c,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:b}),r={headers:{"Content-Type":"application/json"}},n.next=5,p.a.post("".concat(m,"/api/user/login"),{email:e,password:t},r);case 5:c=n.sent,s=c.data,localStorage.setItem("userInfo",JSON.stringify(s)),a({type:O,payload:s}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:x,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(r,d))},children:Object(y.jsxs)("div",{className:"inputContainer",children:[Object(y.jsx)("input",{type:"email",value:r,placeholder:"Email",onChange:function(e){c(e.target.value)}}),Object(y.jsx)("input",{type:"password",value:d,placeholder:"Password",onChange:function(e){h(e.target.value)}}),Object(y.jsx)("button",{type:"submit",children:"Login"})]})})]})})]})},w=n(15),N=n(32),C=n(280),k=n(292),E=n(291),T=n(276),U=n(277),_=n(278),P=n(279),D=n(272),L=n(21),R=n(273),A=n(271),F=n(135),B=n.n(F),M=n(274),W=n(52),G=n(294),z=n(79),J=n.n(z),H=n(275),Y=n(136),K=n.n(Y),Q=n(69),q=n.n(Q),Z=Object(D.a)((function(e){return{appBarRoot:{display:"flex",alignItems:"center"},appTitle:{flexGrow:1},appBar:Object(N.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(N.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),sectionDesktop:Object(N.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(N.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),chat:{color:"white"},logout:{color:"white"}}}));var V=function(e){var t=e.handleDrawerToggle,n=Object(o.c)((function(e){return e.userLogin})).userInfo,a=Object(o.b)(),r=Z();return Object(L.a)(),Object(y.jsx)("div",{className:r.appBarRoot,children:Object(y.jsx)(R.a,{position:"fixed",className:r.appBar,children:Object(y.jsxs)(M.a,{children:[Object(y.jsx)(A.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:t,className:r.menuButton,children:Object(y.jsx)(B.a,{})}),Object(y.jsx)(W.a,{variant:"h5",noWrap:!0,className:r.appTitle,children:"IIITM NETWORK"}),Object(y.jsx)(w.b,{to:"/chat",children:Object(y.jsx)(A.a,{className:r.chat,children:Object(y.jsx)(H.a,{badgeContent:4,color:"secondary",children:Object(y.jsx)(J.a,{})})})}),Object(y.jsx)(w.b,{to:"/post/favourite",children:Object(y.jsx)(A.a,{className:r.chat,children:Object(y.jsx)(q.a,{})})}),Object(y.jsx)(A.a,{onClick:function(){localStorage.removeItem("userInfo"),a({type:h})},children:Object(y.jsx)(K.a,{className:r.logout})}),Object(y.jsx)(G.a,{src:n.userProfilePic})]})})})},X=n(137),$=n.n(X),ee=240,te=Object(D.a)((function(e){return{root:{display:"flex"},appBarRoot:{flexGrow:1},appTitle:{flexGrow:1},drawer:Object(N.a)({},e.breakpoints.up("sm"),{width:ee,flexShrink:0}),appBar:Object(N.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(ee,"px)"),marginLeft:ee}),listItem:{marginTop:"10px"},menuButton:Object(N.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:ee},content:{flexGrow:1,padding:e.spacing(3)}}}));var ne=function(e){var t=Object(f.g)(),n=e.window,a=te(),c=Object(L.a)(),s=r.a.useState(!1),o=Object(i.a)(s,2),l=o[0],u=o[1],j=function(){u(!l)},d=Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{className:a.toolbar}),Object(y.jsx)(T.a,{children:[{text:"Profile",path:"/"},{text:"Discuss Zones",path:"/discuss"},{text:"Students",path:"/member/student"},{text:"Faculties",path:"/member/faculty"},{text:"Admins",path:"/member/admin"},{text:"Alumni",path:"/member/alumni"}].map((function(e){var n=e.text,r=e.path;return Object(y.jsxs)(U.a,{className:a.listItem,button:!0,onClick:function(){return t.push(r)},children:[Object(y.jsx)(_.a,{primary:n.toUpperCase()}),Object(y.jsx)(P.a,{children:Object(y.jsx)($.a,{})})]},n)}))})]}),p=void 0!==n?function(){return n().document.body}:void 0;return Object(y.jsxs)("div",{className:a.root,children:[Object(y.jsx)(C.a,{}),Object(y.jsx)(V,{handleDrawerToggle:j}),Object(y.jsxs)("nav",{className:a.drawer,"aria-label":"mailbox folders",children:[Object(y.jsx)(E.a,{smUp:!0,implementation:"css",children:Object(y.jsx)(k.a,{container:p,variant:"temporary",anchor:"rtl"===c.direction?"right":"left",open:l,onClose:j,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:d})}),Object(y.jsx)(E.a,{xsDown:!0,implementation:"css",children:Object(y.jsx)(k.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:d})})]}),Object(y.jsxs)("main",{className:a.content,children:[Object(y.jsx)("div",{className:a.toolbar}),e.children]})]})},ae=n(281),re=n(282),ce=n(83),se=n.n(ce),ie=n(84),oe=n.n(ie),le=n(85),ue=n.n(le),je=n(86),de=n.n(je),pe=n(87),be=n.n(pe),Oe=n(82),xe=n.n(Oe),he=n(81),me=n.n(he),fe=Object(D.a)({root:{width:400,minHeight:250,maxHeight:280},header:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-around"},media:{width:"50px",height:"50px"},itemContainer:{width:"100%",display:"flex",flexDirection:"column"},item:{display:"flex",alignItems:"center",margin:"10px"},socials:{width:"100%",display:"flex",alignItems:"center",margin:"10px",justifyContent:"space-evenly"},icon:{marginRight:"10px"}});function ge(e){var t=e.user,n=fe(),a=t.rollNumber||t.designation||t.currentCompany,r=t.user,c=r.name,s=r.profilePicUrl,i=(r.role,r._id),o=r.email,l=r.mobileNum;return Object(y.jsxs)(ae.a,{className:n.root,elevation:2,children:[Object(y.jsxs)("div",{className:n.header,children:[Object(y.jsx)(G.a,{className:n.media,src:s}),Object(y.jsx)(w.b,{style:{textDecoration:"none"},to:"/user/".concat(i),children:Object(y.jsx)(re.a,{title:c,subheader:a})}),Object(y.jsx)(A.a,{"aria-label":"chat",children:Object(y.jsx)(w.b,{style:{textDecoration:"none"},to:"/chat/".concat(i),children:Object(y.jsx)(J.a,{})})})]}),Object(y.jsxs)("div",{className:n.itemContainer,children:[t.jobRole&&Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(me.a,{className:n.icon}),t.jobRole]}),t.honour&&Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(xe.a,{className:n.icon}),t.honour]}),Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(se.a,{className:n.icon}),o]}),Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(oe.a,{className:n.icon}),l]}),Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(ue.a,{className:n.icon}),Object(y.jsx)(de.a,{className:n.icon}),Object(y.jsx)(be.a,{className:n.icon})]})]})]})}var ve=n(283),ye=n(138),Ie=n.n(ye),Se=function(){var e=Object(f.g)();return Object(y.jsx)("div",{children:Object(y.jsx)(ve.a,{variant:"contained",color:"primary",onClick:function(){return e.goBack()},startIcon:Object(y.jsx)(Ie.a,{}),children:"Go Back"})})},we=Object(D.a)({root:Object(N.a)({display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center",borderStyle:"solid",borderWidth:"1px 0px",marginBottom:"10px",borderColor:"black",color:"#3F51B5"},"borderColor","3F51B5  ")}),Ne=function(e){var t=e.title,n=we();return Object(y.jsxs)("div",{className:n.root,children:[Object(y.jsx)("h3",{children:t.toUpperCase()}),Object(y.jsx)(Se,{})]})},Ce=function(){var e=Object(f.i)(),t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(o.c)((function(e){return e.userLogin})).userInfo,l=p.a.create({baseURL:"".concat(m,"/api/user/").concat(e.userType),headers:{Authorization:s.token}});return Object(a.useEffect)(Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.get("/");case 2:t=e.sent,n=t.data,c(n);case 5:case"end":return e.stop()}}),e)}))),[e]),Object(y.jsxs)("div",{children:[Object(y.jsx)(Ne,{title:"".concat(e.userType,"s")}),Object(y.jsxs)("div",{style:{width:"100%",display:"flex",flexWrap:"wrap",alignItems:"center",alignContent:"center",justifyContent:"space-evenly"},children:[r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})})),r&&r.map((function(e){return Object(y.jsx)("div",{style:{margin:"10px"},children:Object(y.jsx)(ge,{user:e})})}))]})]})},ke=Object(D.a)({root:{display:"flex",flexDirection:"column"},header:{},media:{width:"100%",minWidth:"350px",height:"350px"},itemContainer:{width:"100%",display:"flex",flexDirection:"column"},item:{display:"flex",alignItems:"center",margin:"10px",width:"100%"},socials:{display:"flex",alignItems:"center",margin:"10px",justifyContent:"space-evenly"},button:{width:"100%"},icon:{marginRight:"10px"},info:{display:"flex",flexDirection:"column"},link:{textDecoration:"none"}});function Ee(e){var t=e.user,n=ke(),a=t.rollNumber||t.designation||t.currentCompany,r=t.user,c=r.name,s=r.profilePicUrl,i=(r.role,r._id),o=r.email,l=r.mobileNum;return Object(y.jsxs)(ae.a,{className:n.root,elevation:2,children:[Object(y.jsx)("img",{className:n.media,src:s}),Object(y.jsxs)("div",{className:n.info,children:[Object(y.jsx)("div",{className:n.header,children:Object(y.jsx)(re.a,{title:c.toUpperCase(),subheader:a})}),Object(y.jsxs)("div",{className:n.itemContainer,children:[t.jobRole&&Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(me.a,{className:n.icon}),t.jobRole]}),t.honour&&Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(xe.a,{className:n.icon}),t.honour]}),Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(se.a,{className:n.icon}),o]}),Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(oe.a,{className:n.icon}),l]}),Object(y.jsxs)("div",{className:n.item,children:[Object(y.jsx)(ue.a,{className:n.icon}),Object(y.jsx)(de.a,{className:n.icon}),Object(y.jsx)(be.a,{className:n.icon})]}),Object(y.jsx)("div",{children:Object(y.jsx)(w.b,{style:{textDecoration:"none"},to:"/chat/".concat(i),children:Object(y.jsx)(ve.a,{className:n.button,variant:"contained",color:"secondary",children:"Chat"})})})]})]})]})}var Te=n(285),Ue=n(286),_e=n(141),Pe=n.n(_e),De=n(284),Le=n(88),Re=n.n(Le),Ae=n(139),Fe=n.n(Ae),Be=function(e){var t=e.createdAt,n=Re()(Date.now()),a=Re()(t);n.diff(a,"hours");return Object(y.jsx)(r.a.Fragment,{children:Object(y.jsx)(Fe.a,{format:"DD/MM/YYYY hh:mm A",children:t})})},Me=n(140),We=n.n(Me),Ge="POST_GET_REQUEST",ze="POST_GET_SUCCESS",Je="POST_GET_FAIL",He="NEW_POST_ADD",Ye="POST_DELETE_UPDATE",Ke="POST_LIKE_UPDATE",Qe="POST_DISLIKE_UPDATE",qe="POST_CREATE_REQUEST",Ze="POST_CREATE_SUCCESS",Ve="POST_CREATE_FAIL",Xe="POST_DELETE_REQUEST",$e="POST_DELETE_SUCCESS",et="POST_DELETE_FAIL",tt="POST_LIKE_REQUEST",nt="POST_LIKE_SUCCESS",at="POST_LIKE_FAIL",rt="POST_RESET",ct=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=new FormData).append("file",t),n.append("upload_preset","frandzone"),n.append("cloud_name","prafful026"),e.next=7,p.a.post("https://api.cloudinary.com/v1_1/prafful026/image/upload",n);case 7:return a=e.sent,e.abrupt("return",a.data.url);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),st=function(e){var t=e.postCategory,n=e.postTitle,a=e.postDesc,r=e.media;return function(){var e=Object(j.a)(u.a.mark((function e(c){var s,i,o,l,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c({type:qe}),s=JSON.parse(localStorage.getItem("userInfo")).token,i=p.a.create({baseURL:"".concat(m,"/api/post"),headers:{Authorization:s}}),!r){e.next=8;break}return e.next=7,ct(r);case 7:o=e.sent;case 8:if(o||!r){e.next=12;break}c({type:Ve,payload:"IMAGE UPLOAD FAILED"}),e.next=18;break;case 12:return e.next=14,i.post("/create",{postCategory:t,postTitle:n,postDesc:a,picUrl:o});case 14:l=e.sent,j=l.data,c({type:Ze}),c({type:He,payload:j});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),c({type:Ve,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()},it=Object(D.a)((function(e){return{root:{marginTop:30},deleteIcon:{color:"red",width:"10%"},header:{display:"flex",justifyContent:"space-between"},media:{height:0,paddingTop:"56.25%"}}}));function ot(e){var t=e.post,n=e.keyword,a=Object(o.b)(),c=Object(o.c)((function(e){return e.userLogin})).userInfo,s=t.postTitle,i=t.postDesc,l=t.createdAt,d=t.picUrl,b=t._id,O=t.likes,x=t.user,h=x.name,f=x.profilePicUrl,g=x._id,v=it();return Object(y.jsxs)(ae.a,{className:v.root,children:[Object(y.jsxs)("div",{className:v.header,children:[Object(y.jsx)(re.a,{avatar:Object(y.jsx)(G.a,{src:f,className:v.avatar}),title:h.toUpperCase(),subheader:Object(y.jsx)(Be,{createdAt:l})}),(c.userId===g||"root"===c.userRole)&&Object(y.jsx)(A.a,{className:v.deleteIcon,onClick:function(){a(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(j.a)(u.a.mark((function n(a){var r,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:Xe}),r=JSON.parse(localStorage.getItem("userInfo")).token,c=p.a.create({baseURL:"".concat(m,"/api/post"),headers:{Authorization:r}}),n.next=6,c.delete("/".concat(e));case 6:a({type:$e}),a({type:Ye,payload:{postId:e,isFavourite:t}}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),a({type:et,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(b,"favourite"===n))},children:Object(y.jsx)(We.a,{color:"red"})})]}),Object(y.jsx)(De.a,{image:d,children:Object(y.jsx)("img",{style:{height:"100%",width:"100%"},src:d})}),Object(y.jsxs)(Te.a,{children:[Object(y.jsx)(W.a,{variant:"h6",children:s}),Object(y.jsx)(W.a,{variant:"body2",color:"textSecondary",component:"p",children:i})]}),Object(y.jsxs)(Ue.a,{disableSpacing:!0,children:[Object(y.jsx)(A.a,{"aria-label":"add to favorites",onClick:function(){a(function(e,t){return function(){var n=Object(j.a)(u.a.mark((function n(a){var r,c,s,i,o;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:tt}),r=JSON.parse(localStorage.getItem("userInfo")).token,c=JSON.parse(localStorage.getItem("userInfo")).userId,s=p.a.create({baseURL:"".concat(m,"/api/post"),headers:{Authorization:r}}),n.next=7,s.put("/like/".concat(e));case 7:i=n.sent,o=i.data,console.log(o),a({type:nt}),o.isLiked||a({type:Ke,payload:{postId:e,userId:c}}),o.isLiked&&a({type:Qe,payload:{postId:e,userId:c,isFavourite:t}}),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),a({type:at,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 18:case"end":return n.stop()}}),n,null,[[0,15]])})));return function(e){return n.apply(this,arguments)}}()}(b,"favourite"===n))},children:Object(y.jsx)(H.a,{badgeContent:O.length,color:"secondary",children:O.find((function(e){return e.user===c.userId}))?Object(y.jsx)(r.a.Fragment,{children:Object(y.jsx)(q.a,{color:"primary"})}):Object(y.jsx)(q.a,{})})}),Object(y.jsx)(A.a,{"aria-label":"share",children:Object(y.jsx)(Pe.a,{})})]})]})}var lt=function(e){var t=e.keyword,n=e.isUserById,r=Object(o.b)(),c=Object(o.c)((function(e){return e.postsByCategory})),s=c.error,i=c.posts,l=c.loading;return Object(a.useEffect)((function(){return r(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var a=Object(j.a)(u.a.mark((function a(r){var c,s,i;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,r({type:Ge}),c=JSON.parse(localStorage.getItem("userInfo")).token,s=p.a.create({baseURL:"".concat(m,"/api/post"),headers:{Authorization:c}}),!n){a.next=10;break}return a.next=7,s.get("/user/".concat(e));case 7:i=a.sent,a.next=19;break;case 10:if(!t){a.next=16;break}return a.next=13,s.get("/favourite");case 13:i=a.sent,a.next=19;break;case 16:return a.next=18,s.get("/category/".concat(e));case 18:i=a.sent;case 19:r({type:ze,payload:i.data}),a.next=25;break;case 22:a.prev=22,a.t0=a.catch(0),r({type:Je,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 25:case"end":return a.stop()}}),a,null,[[0,22]])})));return function(e){return a.apply(this,arguments)}}()}(t,"favourite"===t,n)),function(){r({type:rt})}}),[r,t]),Object(y.jsxs)(a.Fragment,{children:[s&&Object(y.jsx)("h1",{children:s}),l?Object(y.jsx)("h1",{children:"loading....."}):Object(y.jsx)(a.Fragment,{children:i.length>0&&i.map((function(e){return Object(y.jsx)(ot,{keyword:t,post:e},e._id)}))})]})},ut=function(){var e=Object(f.i)().userId,t=Object(f.h)(),n=Object(o.c)((function(e){return e.userLogin})).userInfo,r=Object(a.useState)(),c=Object(i.a)(r,2),s=c[0],l=c[1],d=p.a.create({baseURL:"".concat(m,"/api/user"),headers:{Authorization:n.token}});return Object(a.useEffect)(Object(j.a)(u.a.mark((function a(){var r,c,s;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r="/"===t.pathname?n.userId:e,a.next=3,d.get("/profile/".concat(r));case 3:c=a.sent,s=c.data,l(s);case 6:case"end":return a.stop()}}),a)}))),[]),Object(y.jsxs)(a.Fragment,{children:[Object(y.jsx)(Ne,{title:"profile"}),s&&Object(y.jsx)(a.Fragment,{children:Object(y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"space-around"},children:[Object(y.jsx)("div",{style:{maxWidth:"700px",height:"600px"},children:s&&Object(y.jsx)(Ee,{user:s})}),Object(y.jsxs)("div",{style:{minWidth:"400px",maxWidth:"800px"},children:[Object(y.jsx)("h3",{children:"RECENT POSTS BY ".concat("/"===t.pathname?"YOU":s.user.name.toUpperCase())}),Object(y.jsx)(lt,{keyword:"/"===t.pathname?n.userId:e,isUserById:!0})]})]})})]})},jt=Object(D.a)((function(e){return{root:{height:600,display:"flex",flexDirection:"column",justifyContent:"space-between",widh:"70%"},link:{width:"100%",textDecoration:"none"},btn:{width:"100%",height:100,fontSize:"1.4rem",backgroundColor:"#fefefe"}}})),dt=function(){var e=jt();return Object(y.jsxs)("div",{className:e.root,children:[Object(y.jsx)(w.b,{className:e.link,to:"/discuss/general",children:Object(y.jsx)(ve.a,{variant:"outlined",color:"primary",className:e.btn,children:"GENERAL DISCUSSION"})}),Object(y.jsx)(w.b,{className:e.link,to:"/discuss/placement",children:Object(y.jsx)(ve.a,{variant:"outlined",color:"primary",className:e.btn,children:"PLACEMENT DISCUSSION"})}),Object(y.jsx)(w.b,{className:e.link,to:"/discuss/college",children:Object(y.jsx)(ve.a,{variant:"outlined",color:"primary",className:e.btn,children:"COLLEGE DISCUSSION"})}),Object(y.jsx)(w.b,{className:e.link,to:"/discuss/student",children:Object(y.jsx)(ve.a,{variant:"outlined",color:"primary",className:e.btn,children:"STUDENT DISCUSSION"})})]})},pt=n(288),bt=Object(D.a)({formStyles:{display:"flex",flexDirection:"column",maxHeight:1e3,justifyContent:"space-between",marginTop:30}}),Ot=function(e){var t=e.location,n=Object(o.c)((function(e){return e.postCreate})),r=(n.success,n.loading),c=(n.error,n.newPost,Object(a.useRef)()),s=Object(o.b)(),l=Object(a.useState)(""),d=Object(i.a)(l,2),p=d[0],b=d[1],O=Object(a.useState)(""),x=Object(i.a)(O,2),h=x[0],m=x[1],f=Object(a.useState)(!1),g=Object(i.a)(f,2),v=g[0],I=g[1],S=Object(a.useState)(null),w=Object(i.a)(S,2),N=w[0],C=w[1],k=Object(a.useState)(null),E=Object(i.a)(k,2),T=E[0],U=E[1],_=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),s(st({postTitle:p,postDesc:h,postCategory:t,media:N})),C(null),U(null),I(!1),b(""),m("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=bt();return Object(y.jsx)("div",{className:P.root,children:Object(y.jsxs)("form",{onSubmit:_,className:P.formStyles,children:[Object(y.jsx)("input",{ref:c,onChange:function(e){var t=e.target.files;t&&t.length>0&&(C(t[0]),I(!0),U(URL.createObjectURL(t[0])))},name:"media",style:{display:"none"},type:"file",accept:"image/*"}),Object(y.jsx)("div",{onClick:function(){return c.current.click()},style:{display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",width:"100%",border:"dotted",cursor:"pointer",borderColor:v?"green":"black"},children:null===N?Object(y.jsx)("h4",{children:"UPLOAD A IMAGE"}):Object(y.jsx)("img",{src:T,alt:"PostImage"})}),Object(y.jsx)(pt.a,{id:"outlined-basic",label:"Title",variant:"outlined",required:!0,value:p,onChange:function(e){return b(e.target.value)}}),Object(y.jsx)(pt.a,{id:"outlined-multiline-static",label:"Description",multiline:!0,rows:4,variant:"outlined",value:h,onChange:function(e){return m(e.target.value)},required:!0}),Object(y.jsx)(ve.a,{disabled:r,type:"submit",variant:"contained",color:"primary",children:r?"loading":"POST"})]})})},xt=Object(D.a)({root:{display:"flex",flexDirection:"column",maxWidth:1200,margin:"auto"}}),ht=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2);t[0],t[1];var n=Object(f.h)(),c=xt();return Object(y.jsxs)(r.a.Fragment,{children:[Object(y.jsx)(Ne,{title:"".concat(n.pathname.split("/")[2].toUpperCase()," Discussion Zone")}),Object(y.jsxs)("div",{className:c.root,children:[Object(y.jsx)(Ot,{location:n.pathname.split("/")[2]}),Object(y.jsx)(lt,{keyword:n.pathname.split("/")[2]})]})]})},mt=n(287),ft=function(e){var t=e.chat,n=Object(o.c)((function(e){return e.userLogin})).userInfo,a=t.messagesWith,r=t.name,c=t.profilePicUrl,s=t.lastMessage,i=t.date,l=t.lastMessageSender;return Object(y.jsx)("div",{style:{padding:14},className:"App",children:Object(y.jsxs)(mt.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(y.jsx)(mt.a,{item:!0,children:Object(y.jsx)(G.a,{alt:"Remy Sharp",src:c})}),Object(y.jsxs)(mt.a,{justifyContent:"left",item:!0,xs:!0,zeroMinWidth:!0,children:[Object(y.jsx)(w.b,{style:{textDecoration:"none"},to:"/chat/".concat(a),children:Object(y.jsx)("h4",{style:{margin:0,textAlign:"left",color:"black",textDecoration:"none"},children:r.toUpperCase()})}),Object(y.jsxs)("p",{style:{textAlign:"left"},children:[l===n.userId?"YOU : ":"".concat(r.split(" ")[0].toUpperCase()," : "),s.length>50?"".concat(s.substring(0,50),"..."):s]}),Object(y.jsx)("p",{style:{textAlign:"left",color:"gray"},children:Object(y.jsx)(Be,{createdAt:i})})]})]})})},gt="CHATS_RECENT_REQUEST",vt="CHATS_RECENT_SUCCESS",yt="CHATS_RECENT_FAIL",It=n(147),St=Object(D.a)({root:{display:"flex",flexDirection:"column",maxWidth:1e3,margin:"auto"}}),wt=function(){var e=St(),t=Object(o.b)(),n=Object(o.c)((function(e){return e.recentChats})),r=n.loading,c=(n.error,n.recentChats);return Object(a.useEffect)((function(){0==c.length&&t(function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:gt}),n=JSON.parse(localStorage.getItem("userInfo")).token,a=p.a.create({baseURL:"".concat(m,"/api/chat"),headers:{Authorization:n}}),e.next=6,a.get("/");case 6:r=e.sent,c=r.data,t({type:vt,payload:c}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:yt,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(y.jsxs)("div",{children:[Object(y.jsx)(Ne,{title:"Recent Chats"}),r?Object(y.jsx)("h1",{children:"Loading...."}):Object(y.jsx)("div",{className:e.root,children:c.map((function(e){return Object(y.jsx)(It.a,{elevation:14,style:{padding:"20px",marginBottom:"10px"},children:Object(y.jsx)(ft,{chat:e})})}))})]})},Nt=n(45),Ct=Object(D.a)({root:{height:"70px",display:"flex",flexDirection:"row",alignItems:"center",padding:"5px",borderStyle:"solid",borderBottom:0,borderLeft:0,borderRight:0,borderColor:"blue",backgroundColor:"white"},avatar:{marginRight:"10px"}}),kt=function(e){var t=e.name,n=e.profilePicUrl,a=(e.userId,Ct());return Object(y.jsxs)("div",{className:a.root,children:[Object(y.jsx)(G.a,{alt:"Remy Sharp",src:n,className:a.avatar}),Object(y.jsx)("h4",{style:{margin:0,textAlign:"left"},children:t.toUpperCase()})]})},Et=n(142),Tt=n.n(Et),Ut=Object(D.a)((function(e){return{button:{margin:e.spacing(1)},input:{width:"100%"},form:{display:"flex"}}})),_t=function(e){var t=e.sendMsg,n=Object(a.useState)(""),c=Object(i.a)(n,2),s=c[0],o=c[1],l=Ut();return Object(y.jsx)(r.a.Fragment,{children:Object(y.jsx)("div",{style:{backgroundColor:"white"},children:Object(y.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(s),o("")},className:l.form,autoComplete:"off",children:[Object(y.jsx)(pt.a,{id:"outlined-basic",label:"Write Message",variant:"outlined",className:l.input,value:s,onChange:function(e){return o(e.target.value)},required:!0,autoComplete:!1}),Object(y.jsx)(A.a,{color:"primary","aria-label":"add to shopping cart",type:"submit",children:Object(y.jsx)(Tt.a,{})})]})})})};n(191);var Pt=function(e){var t=e.message,n=e.user,a=e.profilePicUrl,r=e.bannerProfilePic,c=e.divRef,s=t.sender===n;return Object(y.jsxs)("div",{className:"bubbleWrapper",ref:c,children:[Object(y.jsxs)("div",{className:s?"inlineContainer own":"inlineContainer",children:[Object(y.jsx)("img",{className:"inlineIcon",src:s?a:r}),Object(y.jsx)("div",{className:s?"ownBubble own":"otherBubble other",children:t.msg})]}),Object(y.jsx)("span",{className:s?"own":"other",children:Object(y.jsx)(Be,{createdAt:t.date})})]})},Dt=n(143),Lt=n.n(Dt),Rt=function(e){e.current&&e.current.scrollIntoView({behaviour:"smooth"})},At=function(){var e=Object(f.g)(),t=Object(a.useRef)(),n=Object(f.i)(),r=Object(o.c)((function(e){return e.userLogin})).userInfo,c=Object(a.useRef)(),s=Object(a.useState)([]),l=Object(i.a)(s,2),d=l[0],p=l[1],b=Object(a.useState)({name:"",profilePicUrl:""}),O=Object(i.a)(b,2),x=O[0],h=O[1],g=Object(a.useState)(null),v=Object(i.a)(g,2),S=v[0],w=v[1];Object(a.useEffect)((function(){n.userId===r.userId&&e.replace("/")})),Object(a.useEffect)((function(){return t.current||(t.current=Lt()(m)),t.current&&t.current.emit("join",{userId:r.userId}),function(){t.current&&(t.current.disconnect(),t.current.off())}}),[]),Object(a.useEffect)((function(){t.current&&(t.current.emit("loadMessages",{userId:r.userId,messagesWith:n.userId}),t.current.on("messagesLoaded",function(){var e=Object(j.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.chat,p(n.messages),h({name:n.messagesWith.name,profilePicUrl:n.messagesWith.profilePicUrl}),c.current&&Rt(c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.current.on("noChatFound",function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name,a=t.profilePicUrl,n&&a?h({name:n,profilePicUrl:a}):w("Invalid User"),p([]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);return Object(a.useEffect)((function(){t.current&&(t.current.on("msgSent",(function(e){var t=e.newMsg;t.receiver===n.userId&&p((function(e){return[].concat(Object(Nt.a)(e),[t])}))})),t.current.on("newMsgReceived",function(){var e=Object(j.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.newMsg).sender===n.userId&&(p((function(e){return[].concat(Object(Nt.a)(e),[a])})),c.current&&Rt(c));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),Object(a.useEffect)((function(){d.length>0&&Rt(c)}),[d]),Object(y.jsxs)("div",{children:[Object(y.jsx)(Se,{}),S?Object(y.jsx)(I,{error:S}):Object(y.jsxs)("div",{style:{overflow:"auto",overflowX:"hidden",maxHeight:"35rem",maxWidth:"1000px",margin:"auto",backgroundColor:"whitesmoke"},children:[Object(y.jsx)("div",{style:{position:"sticky",top:"0"},children:Object(y.jsx)(kt,{name:x.name,profilePicUrl:x.profilePicUrl})}),d.length>0&&d.map((function(e){return Object(y.jsx)(Pt,{divRef:c,message:e,bannerProfilePic:x.profilePicUrl,user:r.userId,profilePicUrl:r.userProfilePic})})),Object(y.jsx)("div",{style:{position:"sticky",bottom:"0"},children:Object(y.jsx)(_t,{sendMsg:function(e){t.current&&t.current.emit("sendNewMsg",{userId:r.userId,msgSendToUserId:n.userId,msg:e})}})})]})]})},Ft=Object(D.a)({root:{display:"flex",flexDirection:"column",maxWidth:1200,margin:"auto"}}),Bt=function(){var e=Ft(),t=Object(f.h)();return Object(y.jsxs)(a.Fragment,{children:[Object(y.jsx)(Ne,{title:"favourite posts"}),Object(y.jsx)("div",{className:e.root,children:Object(y.jsx)(lt,{keyword:t.pathname.split("/")[2]})})]})},Mt=function(){var e=Object(o.c)((function(e){return e.userLogin})).userInfo;return Object(y.jsx)(w.a,{children:Object(y.jsxs)(f.d,{children:[Object(y.jsx)(f.b,{path:"/login",component:S,exact:!0}),e&&Object(y.jsxs)(ne,{children:[Object(y.jsx)(f.b,{path:"/",component:ut,exact:!0}),Object(y.jsx)(f.b,{path:"/member/:userType",component:Ce,exact:!0}),Object(y.jsx)(f.b,{path:"/discuss",component:dt,exact:!0}),Object(y.jsx)(f.b,{path:"/post/favourite",component:Bt,exact:!0}),Object(y.jsx)(f.b,{path:"/discuss/:postType",component:ht,exact:!0}),Object(y.jsx)(f.b,{path:"/chat",component:wt,exact:!0}),Object(y.jsx)(f.b,{path:"/chat/:userId",component:At,exact:!0}),Object(y.jsx)(f.b,{path:"/user/:userId",component:ut,exact:!0})]}),Object(y.jsx)(f.b,{path:"*",children:Object(y.jsx)(f.a,{to:"/login"})})]})})},Wt=n(70),Gt=n(144),zt=n(145),Jt=n(29),Ht=Object(Wt.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{loading:!0};case O:return{loading:!1,userInfo:t.payload};case x:return{loading:!1,error:t.payload};case h:return{};default:return e}},postsByCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{posts:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return{loading:!0,posts:[]};case ze:return{loading:!1,posts:t.payload};case Je:return{loading:!1,error:t.payload};case He:return Object(Jt.a)(Object(Jt.a)({},e),{},{posts:[t.payload].concat(Object(Nt.a)(e.posts))});case rt:return{posts:[]};case Ye:if(t)return Object(Jt.a)(Object(Jt.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload.postId}))});case Ke:var n=e.posts.findIndex((function(e){return e._id===t.payload.postId})),a=e.posts.find((function(e){return e._id===t.payload.postId})),r=a.likes;return Object(Jt.a)(Object(Jt.a)({},e),{},{posts:[].concat(Object(Nt.a)(e.posts.slice(0,n)),[a=Object(Jt.a)(Object(Jt.a)({},a),{},{likes:[{user:t.payload.userId}].concat(Object(Nt.a)(r))})],Object(Nt.a)(e.posts.slice(n+1)))});case Qe:if(t.payload.isFavourite)return Object(Jt.a)(Object(Jt.a)({},e),{},{posts:e.posts.filter((function(e){return e._id!==t.payload.postId}))});var c=e.posts.findIndex((function(e){return e._id===t.payload.postId})),s=e.posts.find((function(e){return e._id===t.payload.postId})),i=s.likes;return Object(Jt.a)(Object(Jt.a)({},e),{},{posts:[].concat(Object(Nt.a)(e.posts.slice(0,c)),[s=Object(Jt.a)(Object(Jt.a)({},s),{},{likes:i.filter((function(e){return e.user!==t.payload.userId}))})],Object(Nt.a)(e.posts.slice(c+1)))});default:return e}},postCreate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qe:return{success:!1,loading:!0};case Ze:return{loading:!1,success:!0,newPost:t.payload};case Ve:return{loading:!1,error:t.payload};default:return e}},postDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Xe:return{success:!1,loading:!0};case $e:return{loading:!1,success:!0};case et:return{loading:!1,error:t.payload};default:return e}},postLike:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tt:return{success:!1,loading:!0};case nt:return{loading:!1,success:!0};case at:return{loading:!1,error:t.payload};default:return e}},recentChats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{recentChats:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gt:return{loading:!0};case vt:return{loading:!1,recentChats:t.payload};case yt:return{loading:!1,error:t.payload};default:return e}}}),Yt={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Kt=Object(Wt.createStore)(Ht,Yt,Object(zt.composeWithDevTools)(Object(Wt.applyMiddleware)(Gt.a)));s.a.render(Object(y.jsx)(o.a,{store:Kt,children:Object(y.jsx)(Mt,{})}),document.getElementById("root"))}},[[221,1,2]]]);
//# sourceMappingURL=main.acb12541.chunk.js.map